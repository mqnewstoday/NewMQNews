<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="ALT_LogoMQN.png" type="image/png">
    <link rel="shortcut icon" href="ALT_LogoMQN.png" type="image/png">
    <title>MQ News Today</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Merriweather:wght@300;400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="theme.css?v=2">
    <link rel="stylesheet" href="style.css?v=2">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="LogoMQN144.png" sizes="any">

    <meta name="theme-color" content="#9d1b1b">

    <link rel="apple-touch-icon" href="ALT_LogoMQN.png">

    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:title" content="MQ News Today - Truth & Clarity">
    <meta property="og:description" content="Berita dan Analisis Mendalam seputar Geopolitik, Eskatologi, dan Islam.">
    <meta property="og:image" content="ALT_LogoMQN.png">
    <meta property="og:url" content="https://mqnewstoday.my.id">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="MQ News Today">

    <!-- Schema for Google Site Name -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "MQ News Today",
      "alternateName": ["MQNewsToday", "MQ News"],
      "url": "https://mqnewstoday.my.id"
    }
    </script>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5035531780463708"
        crossorigin="anonymous"></script>
    <style>
        /* FIX SETTINGS ICON STYLE (Override .sidebar a inheritance) */
        .sidebar .settings-icon-btn {
            padding: 8px !important;
            /* Padding nyaman untuk touch */
            border: none !important;
            width: auto !important;
            justify-content: center !important;
            margin-right: 5px !important;
            /* Jarak kecil ke Search Bar */
            background: rgba(255, 255, 255, 0.05);
            /* Sedikit bg biar rapi */
            border-radius: 50%;
            height: 40px;
            width: 40px;
        }

        .sidebar .settings-icon-btn::after {
            display: none !important;
            /* Hapus panah kuning warisan */
        }

        .sidebar .settings-icon-btn:hover {
            background: rgba(255, 255, 255, 0.1) !important;
            padding-left: 8px !important;
            /* Cegah efek geser */
            transform: rotate(45deg);
            /* Efek putar dikit */
        }

        /* Search Box Reset Margin */
        .sidebar-header .search-box {
            margin: 0 !important;
            flex-grow: 1;
            /* Pastikan dia menuhin sisa ruang */
        }

        /* Custom Auth Buttons Sidebar */
        .auth-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            margin-top: 10px;
            transition: 0.2s;
            cursor: pointer;
            box-sizing: border-box;
        }

        .auth-btn svg {
            stroke-width: 2.5;
        }

        .auth-btn.primary {
            background: var(--primary);
            color: #fff;
            border: none;
        }

        .auth-btn.primary:hover {
            opacity: 0.9;
        }

        .auth-btn.danger {
            background: rgba(229, 57, 53, 0.1);
            color: #e53935;
            border: 1px solid rgba(229, 57, 53, 0.3);
            margin-bottom: 5px;
        }

        .auth-btn.danger:hover {
            background: rgba(229, 57, 53, 0.2);
        }

        .auth-bottom-wrapper {
            padding: 15px;
            border-top: 1px solid var(--border);
            margin-top: auto;
        }

        /* --- COMPACT NEWS CARD DESIGN (OVERRIDE) --- */
        .news-card {
            display: flex;
            flex-direction: column;
            height: 100%;
            /* Uniform Height */
            border-radius: 8px;
            overflow: hidden;
            background: var(--bg-card);
            border: 1px solid var(--border);
        }

        .card-img-wrap {
            position: relative;
            /* Anchor for floating badge */
            width: 100%;
            /* Aspect Ratio handled inline 16/9 */
        }

        .card-category-float {
            position: absolute;
            top: 8px;
            left: 8px;
            z-index: 5;
            background: var(--primary);
            color: #fff;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
            letter-spacing: 0.5px;
        }

        .card-body {
            padding: 12px !important;
            /* Reduced Padding */
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        .card-title {
            font-size: 0.95rem !important;
            font-weight: 700;
            line-height: 1.4;
            margin: 0 0 10px 0 !important;
            /* TRUNCATE MULTI LINE */
            display: -webkit-box;
            -webkit-line-clamp: 3;
            line-clamp: 3;
            /* Max 3 Baris */
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .card-footer {
            margin-top: auto;
            /* Push to bottom */
            padding-top: 10px;
            border-top: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-date {
            font-size: 0.75rem !important;
            color: #888;
        }

        .read-btn {
            font-size: 0.75rem !important;
            padding: 4px 10px !important;
        }
    </style>
</head>

<body>
    <!-- ADSENSE SLOT LEFT (Desktop Only) -->
    <div class="ad-skyscraper ad-left">
        <!-- Google AdSense Script Here -->
    </div>

    <!-- ADSENSE SLOT RIGHT (Desktop Only) -->
    <div class="ad-skyscraper ad-right">
        <!-- Google AdSense Script Here -->
    </div>
    <script src="theme-init.js?v=2"></script>

    <!-- NUCLEAR CACHE KILLER (EMERGENCY FIX) -->
    <script>
        (function () {
            // 1. Unregister Service Workers (Penyebab Utama Cache Bandel)
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.getRegistrations().then(function (registrations) {
                    for (let registration of registrations) {
                        registration.unregister();
                    }
                });
            }

            // 2. Paksa Reload Sekali jika versi baru belum terdeteksi
            // Kita pakai sessionStorage biar gak reload terus-terusan (loop).
            if (!sessionStorage.getItem('CACHE_BUSTED_V2')) {
                // Hapus Cache Storage API juga kalau ada
                if ('caches' in window) {
                    caches.keys().then(function (names) {
                        for (let name of names) caches.delete(name);
                    });
                }

                // Tandai sudah dibersihkan
                sessionStorage.setItem('CACHE_BUSTED_V2', 'true');

                // Reload Keras dari Server
                console.log("FORCE RELOAD FOR UPDATE...");
                window.location.reload(true);
            }
        })();
    </script>
    <header>

        <div class="brand">
            <img src="ALT_LogoMQN.png" alt="Logo MQ" onerror="this.style.display='none'">
            <div class="brand-text">
                <h1>MQ News Today</h1>
                <span>Truth & Clarity</span>
            </div>
        </div>
        <div class="nav-right-actions"
            style="position: absolute; right: 20px; top: 50%; transform: translateY(-50%); display: flex; align-items: center; gap: 15px; z-index: 100;">
            <!-- BELL NOTIFICATION ICON -->
            <a href="notifikasi.html" class="nav-icon-btn"
                style="display: flex; align-items: center; justify-content: center; color: inherit; text-decoration: none;">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                </svg>
            </a>

            <!-- HAMBURGER ORIGINAL (FORCED STATIC) -->
            <div class="menu-toggle" onclick="toggleSidebar()"
                style="position: static !important; margin: 0 !important;">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </header>

    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <a href="settings.html" class="settings-icon-btn" title="Pengaturan">
                <svg viewBox="0 0 24 24" width="22" height="22" stroke="currentColor" stroke-width="2" fill="none"
                    stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path
                        d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                    </path>
                </svg>
            </a>
            <div class="search-box">
                <svg class="search-icon" viewBox="0 0 24 24" onclick="executeSearch()" title="Cari Berita">
                    <path
                        d="M21.71 20.29l-5.01-5.01C17.54 13.68 18 11.91 18 10c0-4.41-3.59-8-8-8S2 5.59 2 10s3.59 8 8 8c1.91 0 3.68-.46 5.28-1.3l5.01 5.01c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.42zM4 10c0-3.31 2.69-6 6-6s6 2.69 6 6-2.69 6-6 6-6-2.69-6-6z" />
                </svg>
                <input type="text" id="searchInput" class="search-input" placeholder="Cari..."
                    onkeypress="handleEnterKey(event)">
            </div>
            <div class="close-sidebar-btn" onclick="toggleSidebar()">&times;</div>
        </div>

        <div class="sidebar-menu">
            <!-- MENU UTAMA DROPDOWN -->
            <div class="sidebar-dropdown-wrapper" id="menu-utama-dropdown">
                <div class="sidebar-dropdown-header" onclick="toggleDropdown('menu-utama-dropdown')">
                    <span>MENU UTAMA</span>
                    <span class="sidebar-arrow">&rsaquo;</span>
                </div>
                <div class="sidebar-submenu">
                    <a href="#" onclick="toggleSidebar(); setCategory(null, 'Semua')">BERANDA</a>
                    <a href="buku.html">PDF</a>
                    <a href="pesan-tauhid.html">19 PESAN</a>
                    <a href="audio.html">AUDIO</a>
                    <a href="simpan.html">BOOKMARK</a>
                    <a href="pramimpi.html">MUBASYIRAT</a>
                </div>
            </div>
            <!-- DROPDOWN WRAPPER -->
            <div class="sidebar-dropdown-wrapper" id="mq-official-dropdown">
                <div class="sidebar-dropdown-header" onclick="toggleDropdown('mq-official-dropdown')">
                    <span>MUHAMMAD QASIM OFFICIAL</span>
                    <span class="sidebar-arrow">&rsaquo;</span>
                    <!-- Menggunakan simbol yang sama dengan hover tapi diputar nanti -->
                </div>
                <div class="sidebar-submenu">
                    <a href="https://muhammadqasimpk.org/id" target="_blank">MUHAMMAD QASIM PK</a>
                    <a href="https://muhammadqasimpk.org/id/video-dan-wawancara-id/" target="_blank">PIDATO &
                        WAWANCARA</a>
                    <a href="https://muhammadqasimpk.org/id/siaran-akhbar/" target="_blank">SIARAN AKBAR</a>
                    <a href="https://muhammadqasimpk.org/id/mimpi-yang-telah-menjadi-kenyataan/" target="_blank">MIMPI
                        JADI KENYATAAN</a>
                </div>
            </div>

            <!-- MUKJIZAT DROPDOWN -->
            <div class="sidebar-dropdown-wrapper" id="mukjizat-dropdown">
                <div class="sidebar-dropdown-header" onclick="toggleDropdown('mukjizat-dropdown')">
                    <span>MUKJIZAT</span>
                    <span class="sidebar-arrow">&rsaquo;</span>
                </div>
                <div class="sidebar-submenu">
                    <a href="https://casereportsinregrowth.com" target="_blank">CASE REPORTS</a>
                    <a href="transformasi.html?category=HAIR%20REGROWTH">HAIR REGROWTH</a>
                    <a href="transformasi.html?category=FOOT%20ELONGATION">FOOT ELONGATION</a>
                    <a href="transformasi.html?category=FEET%20INCREASE">FEET INCREASE</a>
                </div>
            </div>
            <!-- ADMIN DROPDOWN (Hidden by default) -->
            <div class="sidebar-dropdown-wrapper" id="admin-dropdown" style="display:none;">
                <div class="sidebar-dropdown-header" onclick="toggleDropdown('admin-dropdown')">
                    <span style="color:var(--gold); font-weight:bold;">KONTROL ADMIN</span>
                    <span class="sidebar-arrow">&rsaquo;</span>
                </div>
                <div class="sidebar-submenu">
                    <a href="admin.html" style="color:var(--gold);">DATABASE USER</a>
                </div>
            </div>

            <!-- OTHERS DROPDOWN -->
            <div class="sidebar-dropdown-wrapper" id="others-dropdown">
                <div class="sidebar-dropdown-header" onclick="toggleDropdown('others-dropdown')">
                    <span>OTHERS</span>
                    <span class="sidebar-arrow">&rsaquo;</span>
                </div>
                <div class="sidebar-submenu">
                    <a href="https://saweria.co/mqnewstoday" target="_blank">SUPPORT ME</a>
                    <a href="https://chat.whatsapp.com/Cb6nVjlAtj06JRdeFzRpKw" target="_blank">BERGABUNG KE GRUP</a>
                    <a href="https://wa.me/6285705856030" target="_blank">KONTAK KAMI</a>
                    <a href="tentang-kami.html">TENTANG KAMI</a>
                    <a href="privacy-policy.html">KEBIJAKAN PRIVASI</a>
                    <a href="disclaimer.html">DISCLAIMER</a>
                    <a href="terms.html">SYARAT & KETENTUAN</a>
                </div>
            </div>
        </div>

        <div class="auth-bottom-wrapper">
            <!-- Logout (Hidden by default) -->
            <a href="#" id="logout-btn" class="auth-btn danger" style="display: none;" onclick="return false;">
                <!-- Icon Pintu Keluar -->
                <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                    <polyline points="16 17 21 12 16 7"></polyline>
                    <line x1="21" y1="12" x2="9" y2="12"></line>
                </svg>
                <span>KELUAR</span>
            </a>

            <!-- Login/Profile -->
            <a href="login.html" id="auth-link" class="auth-btn primary">
                <!-- Icon Kartu ID (Inanimate) -->
                <svg id="auth-icon" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor"
                    stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="16" rx="2"></rect>
                    <line x1="7" y1="8" x2="17" y2="8"></line>
                    <line x1="7" y1="12" x2="17" y2="12"></line>
                    <line x1="7" y1="16" x2="17" y2="16"></line>
                </svg>
                <span id="auth-text">MASUK / DAFTAR</span>
            </a>
        </div>
    </div>

    <!-- SIDEBAR OVERLAY -->
    <div class="overlay" id="overlay" onclick="toggleSidebar()"></div>



    <!-- CUSTOM NOTIFICATION BOX -->
    <div id="notifBox" class="custom-notif">
        <div id="notifIcon" class="notif-icon"></div>
        <span id="notifText" class="notif-text">Pesan notifikasi...</span>
    </div>

    <div id="home-view">
        <div class="category-nav">
            <div class="nav-inner" id="nav-container">
                <a onclick="setCategory(null, 'Semua')" class="cat-link active">Semua</a>
                <a onclick="setCategory(null, 'Geopolitik')" class="cat-link">Geopolitik</a>
                <a onclick="setCategory(null, 'Eskatologi')" class="cat-link">Eskatologi</a>
                <a onclick="setCategory(null, 'Mimpi Qasim')" class="cat-link">Mimpi Qasim</a>
                <a onclick="setCategory(null, 'Timur Tengah')" class="cat-link">Timur Tengah</a>
                <a onclick="setCategory(null, 'Trending')" class="cat-link">Trending</a>
            </div>
        </div>

        <div class="date-header-container">
            <div id="live-date" class="live-date-text">Memuat Waktu...</div>

            <svg class="date-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z" />
            </svg>
        </div>





        <!-- BANNER SECTION (WRAPPED FOR ALIGNMENT) -->
        <div class="main-container" style="padding: 0; margin-bottom: 20px;">
            <div id="banner-container" class="showcase-wrapper" style="display: none;">
                <div class="showcase-strip" id="banner-track">
                </div>
            </div>
        </div>

        <div class="quick-menu-grid">

            <a href="buku.html" class="menu-item">
                <div class="icon-box">
                    <svg viewBox="0 0 24 24">
                        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                    </svg>
                </div>
                <span class="menu-label">PDF</span>
            </a>

            <a href="pesan-tauhid.html" class="menu-item">
                <div class="icon-box">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                    </svg>
                </div>
                <span class="menu-label">19 PESAN</span>
            </a>

            <a href="audio.html" class="menu-item">
                <div class="icon-box">
                    <svg viewBox="0 0 24 24">
                        <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                        <path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3z"></path>
                        <path d="M3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"></path>
                    </svg>
                </div>
                <span class="menu-label">AUDIO</span>
            </a>


            <button class="menu-item" onclick="toggleMoreMenu()" id="btnMore">
                <div class="icon-box">
                    <svg id="iconMore" viewBox="0 0 24 24">
                        <rect x="3" y="3" width="7" height="7"></rect>
                        <rect x="14" y="3" width="7" height="7"></rect>
                        <rect x="14" y="14" width="7" height="7"></rect>
                        <rect x="3" y="14" width="7" height="7"></rect>
                    </svg>
                </div>
                <span class="menu-label" id="textMore">LAINNYA</span>
            </button>

            <a href="simpan.html" class="menu-item hidden-row">
                <div class="icon-box">
                    <svg viewBox="0 0 24 24">
                        <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                    </svg>
                </div>
                <span class="menu-label">TERSIMPAN</span>
            </a>

            <!-- MUBASYIRAT (Pindah ke Hidden Row) -->
            <a href="pramimpi.html" class="menu-item hidden-row">
                <div class="icon-box">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z">
                        </path>
                    </svg>
                </div>
                <span class="menu-label">MUBASYIRAT</span>
            </a>

            <a href="https://chat.whatsapp.com/Cb6nVjlAtj06JRdeFzRpKw" class="menu-item hidden-row">
                <div class="icon-box">
                    <svg viewBox="0 0 24 24">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                </div>
                <span class="menu-label">JOIN GRUP</span>
            </a>

            <button class="menu-item hidden-row" id="installBtn">
                <div class="icon-box">
                    <svg viewBox="0 0 24 24">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                </div>
                <span class="menu-label">INSTALL APP</span>
            </button>

            <a href="https://saweria.co/mqnewstoday" target="_blank" class="menu-item hidden-row">
                <div class="icon-box">
                    <svg viewBox="0 0 24 24">
                        <path d="M18 8h1a4 4 0 0 1 0 8h-1"></path>
                        <path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path>
                        <line x1="6" y1="1" x2="6" y2="4"></line>
                        <line x1="10" y1="1" x2="10" y2="4"></line>
                        <line x1="14" y1="1" x2="14" y2="4"></line>
                    </svg>
                </div>
                <span class="menu-label">SAWERIA</span>
            </a>

            <a href="transformasi.html" class="menu-item hidden-row">
                <div class="icon-box">
                    <svg viewBox="0 0 24 24">
                        <path
                            d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
                        </path>
                    </svg>
                </div>
                <span class="menu-label">TRANSFORMASI</span>
            </a>

        </div>



        <div id="mq-quote-widget" class="mq-quote-compact" style="display:none;">
            <div class="quote-label">QUOTES OF THE END TIMES</div>

            <blockquote id="mq-quote-text">Loading...</blockquote>

            <div id="mq-quote-source">-- --</div>
        </div>





        <main class="main-container" id="mainContainer">

            <div class="section-label">
                <span id="current-category-label">Berita Terkini</span>
                <div class="section-line"></div>
            </div>
            <div id="news-container" class="news-grid">
                <div class="loader">Mengunduh data berita...</div>
            </div>
            <!-- <div id="news-container" class="news-grid"></div> -->

            <!-- AD PLACEHOLDER SLIM (IKLAN) -->
            <div class="ad-box-slim">
                IKLAN
            </div>

            <!-- PILIHAN EDITOR SECTION (NEW) -->
            <div class="editor-section">
                <div class="section-label">
                    <span>PILIHAN EDITOR</span>
                    <div class="section-line"></div>
                </div>
                <div id="editor-picks-container" class="editor-list">
                    <div class="loader" style="color:var(--text-muted);">Memuat Pilihan Editor...</div>
                </div>
            </div>


            <!-- MUBASYIRAT SECTION (NEW) -->
            <div class="mubasyirat-section">
                <div class="section-label">
                    <span>MUBASYIRAT</span>
                    <div class="section-line"></div>
                </div>
                <div class="dream-scroll-container" id="dream-container-scroll">
                    <div class="loader" style="width:100%; text-align:center; padding:20px;">Memuat Mubasyirat...
                    </div>
                </div>
            </div>

            <!-- AD PLACEHOLDER SLIM (IKLAN) -->
            <div class="ad-box-slim">
                IKLAN
            </div>

            <script>
                document.addEventListener("DOMContentLoaded", () => {
                    // LINK CSV RESMI DARI USER
                    const MUBASYIRAT_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTOAltvE7tpJsTkKbqMoqLZe-7K9cGk_uPUqeigV7qvWUm5crdAiOJ_hNAvchnjNrE8cA0F-ybuZhKd/pub?gid=703095600&single=true&output=csv";

                    function renderDreams(data) {
                        const container = document.getElementById('dream-container-scroll');
                        container.innerHTML = "";

                        // LIMIT 5 ITEM
                        const limited = data.slice(0, 5);

                        limited.forEach(item => {
                            // Support berbagai variasi key safe
                            const getK = (obj, k) => obj[Object.keys(obj).find(key => key.toLowerCase() === k.toLowerCase())] || "";

                            const title = getK(item, 'judul') || "Tanpa Judul";
                            // Fallback thumbnail jika kosong
                            const thumb = getK(item, 'thumbnail') || "https://placehold.co/450x800?text=No+Image";
                            const date = getK(item, 'tanggal') || ""; // Tanggal mungkin kosong di CSV baru

                            const html = `
                        <div class="dream-card" onclick="window.location.href='mimpi.html?title=' + encodeURIComponent('${title}')">
                            <div class="dream-thumb">
                                <img src="${thumb}" loading="lazy" onerror="this.src='https://placehold.co/450x800?text=Error'">
                                <div class="dream-overlay"></div>
                                <div class="play-overlay">
                                    <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
                                </div>
                            </div>
                            <div class="dream-info">
                                <div class="dream-title">${title}</div>
                                ${date ? `<div class="dream-date">
                                    <svg width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                                    ${date}
                                </div>` : ''}
                            </div>
                        </div>
                        `;
                            container.insertAdjacentHTML('beforeend', html);
                        });

                        // TAMBAH KARTU VIEW ALL
                        const viewAllHtml = `
                            <div class="view-all-card" onclick="window.location.href='pramimpi.html'">
                                <svg class="view-all-icon" viewBox="0 0 24 24">
                                    <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                                <span class="view-all-text">LIHAT<br>SEMUA</span>
                            </div>
                        `;
                        container.insertAdjacentHTML('beforeend', viewAllHtml);
                    }

                    if (window.Papa) {
                        Papa.parse(MUBASYIRAT_CSV_URL, {
                            download: true, header: true, skipEmptyLines: true,
                            complete: (res) => {
                                if (res.data && res.data.length > 0) renderDreams(res.data);
                                else container.innerHTML = "<div style='text-align:center;width:100%'>Belum ada data mimpi.</div>";
                            },
                            error: () => document.getElementById('dream-container-scroll').innerHTML = "<div style='text-align:center;width:100%'>Gagal memuat data.</div>"
                        });
                    }
                });
            </script>

            <!-- BERITA RANDOM SECTION -->
            <div class="random-section">
                <div class="section-label">
                    <span>BERITA RANDOM</span>
                    <div class="section-line"></div>
                </div>
                <!-- Reuse dream-scroll-container style for horizontal scroll -->
                <div class="dream-scroll-container" id="random-news-scroll">
                    <div class="loader" style="width:100%; text-align:center; padding:20px;">Memuat Berita Random...
                    </div>
                </div>
            </div>

            <script>
                // LOGIC BERITA RANDOM (Update tiap jam 8 Malam)
                document.addEventListener("DOMContentLoaded", () => {
                    // Tunggu variabel global allNews tersedia (dari script utama)
                    // Kita akan check setiap 500ms apakah allNews sudah ready
                    const checkNewsInterval = setInterval(() => {
                        if (window.allDataNews && window.allDataNews.length > 0) {
                            clearInterval(checkNewsInterval);
                            initRandomNews(window.allDataNews);
                        } else if (typeof allNews !== 'undefined' && allNews.length > 0) {
                            clearInterval(checkNewsInterval);
                            initRandomNews(allNews);
                        }
                    }, 500);

                    function initRandomNews(newsData) {
                        const container = document.getElementById('random-news-scroll');
                        if (!container) return;

                        // 1. Generate Seed based on 8 PM Logic
                        // Jika sekarang < jam 20:00, maka seed = kemarin. Jika >= 20:00, seed = hari ini.
                        const now = new Date();
                        const cutoff = new Date();
                        cutoff.setHours(20, 0, 0, 0);

                        let seedDate = new Date();
                        if (now < cutoff) {
                            seedDate.setDate(seedDate.getDate() - 1); // Pakai seed kemarin
                        }
                        // Seed string: "YYYY-MM-DD"
                        const seed = seedDate.getFullYear() + "-" + (seedDate.getMonth() + 1) + "-" + seedDate.getDate();

                        // 2. Shuffle dengan Seed
                        // Clone array biar gak ngerusak urutan asli
                        let shuffled = [...newsData];

                        // Simple Seeded Random (SFC32 or Mulberry32 is overkill, use simple LCG)
                        let seedVal = 0;
                        for (let i = 0; i < seed.length; i++) seedVal += seed.charCodeAt(i);

                        const random = () => {
                            const x = Math.sin(seedVal++) * 10000;
                            return x - Math.floor(x);
                        }

                        // Fisher-Yates Shuffle with seeded random
                        for (let i = shuffled.length - 1; i > 0; i--) {
                            const j = Math.floor(random() * (i + 1));
                            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                        }

                        // 3. Ambil 6 Berita
                        const selected = shuffled.slice(0, 6);

                        // 4. Render Horizontal Scroll
                        let html = "";
                        selected.forEach(item => {
                            const getVal = (obj, k) => obj[Object.keys(obj).find(key => key.toLowerCase() === k.toLowerCase())] || "";
                            const title = getVal(item, 'judul') || getVal(item, 'title') || "Tanpa Judul";
                            const thumb = getVal(item, 'gambar') || getVal(item, 'image') || getVal(item, 'thumbnail') || "https://placehold.co/400x600?text=News";
                            const date = getVal(item, 'tanggal') || "";

                            // Gunakan Style Card MUBASYIRAT (dream-card) tapi Rasio KESELURUHAN KOTAK (1:1)
                            // Override style via inline
                            html += `
                                <a href="baca.html?title=${encodeURIComponent(title)}" class="dream-card" style="width:180px; min-width:180px; height:180px; aspect-ratio:1/1; display:flex; flex-direction:column; padding:0; overflow:hidden; text-decoration:none;">
                                    <div class="dream-thumb" style="width:100%; height:65%; border-radius:0;">
                                        <img src="${thumb}" alt="thumb" loading="lazy" style="width:100%; height:100%; object-fit:cover;" onerror="this.src='https://placehold.co/400x400?text=Err'">
                                    </div>
                                    <div class="dream-info" style="width:100%; height:35%; display:flex; align-items:center; justify-content:center; padding:5px 10px; background:var(--bg-card); border-top:1px solid var(--border);">
                                        <h4 class="dream-title" style="font-size:0.85rem; line-height:1.2; margin:0; text-align:center; display:-webkit-box; -webkit-line-clamp:3; -webkit-box-orient:vertical; overflow:hidden; color:var(--text-main) !important; font-weight:700; font-family:'Lato', sans-serif; text-shadow:none;">${title}</h4>
                                    </div>
                                </a>
                             `;
                        });

                        container.innerHTML = html;
                    }
                });
            </script>

            <!-- FAQ SECTION (RELOCATED INSIDE MAIN) -->
            <section class="faq-section" style="margin-top: 10px;">
                <h2
                    style="text-align: center; font-family: 'Cinzel', serif; font-size: 1.5rem; margin-bottom: 30px; color: var(--text-main); line-height: 1.4;">
                    PERTANYAAN YANG PALING SERING DIAJUKAN KEPADA MUHAMMAD QASIM
                </h2>

                <div class="faq-container">
                    <!-- FAQ 1 -->
                    <div class="faq-item">
                        <button class="faq-question">
                            <span>Kapan Anda mulai bermimpi seperti ini?</span>
                            <svg class="faq-icon" viewBox="0 0 24 24">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>Dengan menyebut nama Allah SWT, Yang Maha Pengasih lagi Maha Penyayang. Mimpi pertama
                                yang
                                saya
                                alami dalam hidup saya datang ketika saya berusia sekitar 5 tahun. Setelah itu, ketika
                                saya
                                berusia sekitar 13 tahun baru saya bermimpi lagi. Kemudian, ketika saya berusia 27
                                tahun,
                                saya
                                mulai terus menerus bermimpi dan rangkaian mimpi ini terus berlanjut sampai saat ini.
                            </p>
                        </div>
                    </div>

                    <!-- FAQ 2 -->
                    <div class="faq-item">
                        <button class="faq-question">
                            <span>Apakah Anda menyebarkan mimpi-mimpi ini hanya untuk mendapatkan popularitas?</span>
                            <svg class="faq-icon" viewBox="0 0 24 24">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>Saya telah mengalami mimpi-mimpi ini terus menerus sejak usia saya 17 tahun. Sebelumnya,
                                saya
                                tidak pernah menceritakan mimpi-mimpi ini kepada siapapun. Jika saya memiliki
                                kepentingan
                                atau
                                mencari keuntungan pribadi, seperti ingin menjadi terkenal atau lainnya, maka seseorang
                                biasanya
                                melakukan hal-hal seperti itu di masa mudanya. Ketika mereka ingin terkenal dan ingin
                                didengar
                                orang, mereka melakukan hal-hal seperti itu di usia muda. Jika saya menyebarkan
                                mimpi-mimpi
                                ini
                                untuk alasan pribadi, saya akan melakukannya ketika saya masih muda. Kini, seiring
                                bertambahnya
                                usia, berbagi mimpi-mimpi ini tidak lagi berarti bagi saya, dan saya juga tidak mendapat
                                banyak
                                manfaat dari menyebarkan mimpi-mimpi ini.</p>
                        </div>
                    </div>

                    <!-- FAQ 3 -->
                    <div class="faq-item">
                        <button class="faq-question">
                            <span>Apa alasan Anda Menyebarkan mimpi-mimpi ini?</span>
                            <svg class="faq-icon" viewBox="0 0 24 24">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>Pada tanggal 20 April, atau mungkin 22 April 2014, saya bermimpi untuk pertama kalinya,
                                di
                                mana
                                saya diperintahkan oleh Allah SWT untuk berbagi mimpi-mimpi saya kepada orang lain. Saat
                                itu
                                saya
                                terkejut karena perintah ini tiba-tiba datang setelah sekian tahun saya bermimpi. Saya
                                pikir
                                lebih baik menunggu sebentar. Setelah itu, Nabi Muhammad SAW juga datang dalam mimpi
                                saya
                                dan
                                menyuruh saya untuk menyebarkan mimpi-mimpi yang telah ditunjukkan kepada saya dengan
                                orang-orang untuk menyelamatkan Islam dan Pakistan. Pada bulan Desember 2014, Nabi
                                Muhammad SAW
                                memberi tahu saya dua kali dalam mimpi yang sama bahwa saya harus berbagi mimpi-mimpi
                                yang
                                telah
                                ditunjukkan kepada saya kepada orang-orang untuk menyelamatkan Islam dan Pakistan.</p>
                            <p>Ketika saya mendapat mimpi ini, saya tidak tahu mengapa mimpi-mimpi ini datang kepada
                                saya?
                                Apa
                                maksud dan tujuan mimpi-mimpi itu datang kepada saya dan setelah bertahun-tahun, saya
                                diperintahkan untuk menyebarkan mimpi-mimpi ini dengan semua orang, jadi pada saat itu
                                saya
                                tidak mengetahuinya. Itu adalah hal yang mengejutkan bagi saya juga. Saya seperti tidak
                                percaya,
                                bahkan anggota keluarga saya sendiri tidak percaya pada mimpi-mimpi ini, bagaimana orang
                                lain
                                akan mempercayainya? Nabi Muhammad SAW mengatakan kepada saya dalam mimpi bahwa saya
                                harus
                                menyebarkan mimpi-mimpi saya dengan orang lain. Sekarang, coba Anda katakan kepada saya,
                                jika
                                nabi Muhammad SAW datang dalam mimpi Anda dan memerintahkan Anda untuk melakukan
                                pekerjaan
                                ini,
                                apakah Anda akan menolaknya? Tidak ada seorang Muslim pun yang akan menolak nabi
                                Muhammad SAW.
                                Semua Muslim pasti akan siap untuk mengorbankan hidup mereka, harta dan segalanya untuk
                                nabi
                                Muhammad SAW. Jadi, saya juga seperti itu, ketika nabi Muhammad SAW memberi perintah,
                                maka
                                saya
                                katakan, bahkan saya akan memberikan hidup saya untuk beliau. Ini hanya mimpi lalu
                                komentar-komentar buruk datang. Saya juga merasa sedikit kecewa, saya merasa sangat
                                tertekan.
                            </p>
                        </div>
                    </div>

                    <!-- FAQ 4 -->
                    <div class="faq-item">
                        <button class="faq-question">
                            <span>Mimpi bisa juga datang dari setan. Bagaimana kami tahu bahwa mimpi Anda berasal dari
                                Allah SWT
                                dan bukan dari setan?</span>
                            <svg class="faq-icon" viewBox="0 0 24 24">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>Dalam konteks ini, Anda dapat menyimpulkan mimpi-mimpi ini berasal dari Allah SWT dan
                                bukan
                                dari
                                setan dari hal-hal berikut ini. Pertama-tama, yang paling saya ingat dalam mimpi saya
                                adalah
                                untuk menjauhi syirik dan bentuk-bentuknya. Setan tidak mungkin mendatangi seseorang
                                dalam
                                mimpi
                                dan menyuruhnya untuk tidak melakukan kesyirikan. Dan beriman kepada Keesaan Allah SWT
                                (Yang
                                Maha
                                Agung). Dan kedua, bahwa saya memuji dan memuliakan Allah SWT pada pagi dan sore hari.
                                Jadi
                                setan
                                tidak mungkin memberi tahu seseorang dalam mimpi bahwa Anda harus memuji dan memuliakan
                                Allah SWT
                                setiap pagi dan sore hari. Dan kemudian hal ketiga yang dikatakan kepada saya adalah,
                                untuk
                                mengirimkan shalawat dan salam kepada nabi Muhammad SAW. Dia yang merupakan setan, tidak
                                mungkin
                                memberitahu salah satu dari ketiga perbuatan ini kepada siapapun dalam mimpi. Saya juga
                                pernah
                                bermimpi pada tahun 2008 bahwa saya harus membaca Surah Al-Ikhlas, Surah Al-Falaq dan
                                Surah
                                An-Nas sebelum tidur agar setan menjauh dari saya. Yang kedua adalah tidak seorangpun
                                dapat
                                berkata dusta seperti itu atas nama Allah SWT dan Rasul-Nya (Muhammad SAW) dan bahkan
                                tidak
                                mungkin
                                seseorang terus berbohong atas nama Allah SWT dan Rasul-Nya dan Allah SWT terus
                                menolongnya.
                            </p>
                        </div>
                    </div>

                    <!-- FAQ 5 -->
                    <div class="faq-item">
                        <button class="faq-question">
                            <span>Mengapa hanya Anda yang melihat mimpi-mimpi ini?</span>
                            <svg class="faq-icon" viewBox="0 0 24 24">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>Allah SWT (Yang Maha Tinggi) adalah Tuhan yang memiliki kehendak, apakah Dia akan
                                mengeluarkan
                                matahari dari timur atau dari barat. Tidak ada yang memberi kewenangan kecuali Dia. Dia
                                (Allah SWT
                                Yang Maha Tinggi) memilih orang-orang untuk suatu tugas. Hanya Allah SWT yang lebih
                                mengetahui
                                mengapa Dia memilih saya untuk pekerjaan ini. Mengapa Kepala Angkatan Darat tidak
                                mendapat
                                mimpi-mimpi ini secara langsung? Ini hanyalah rencana Allah SWT. Anda lihat, ketika
                                Pakistan
                                didirikan, Bapak Bangsa (Muhammad Ali Jinnah) dipilih dengan rahmat-Nya untuk tugas ini.
                                Kemudian Allah SWT menciptakan negara Pakistan melalui dirinya. Anda mungkin berpikir,
                                kebaikan
                                seperti apa yang pernah saya lakukan atau berapa banyak perbuatan baik yang saya
                                lakukan,
                                sehingga saya mendapat mimpi-mimpi ini sebagai balasannya. Dalam hal ini, ini semua
                                adalah
                                kehendak Allah SWT dan rahmat-Nya bahwa saya mendapat mimpi-mimpi ini.</p>
                        </div>
                    </div>

                    <!-- FAQ 6 -->
                    <div class="faq-item">
                        <button class="faq-question">
                            <span>Apa yang akan terjadi pada Pakistan di masa depan? Apakah kita akan maju atau tidak?
                                (Berdasarkan mimpi)</span>
                            <svg class="faq-icon" viewBox="0 0 24 24">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>Dengar, apa yang telah ditunjukkan kepada saya dalam mimpi saya adalah, sampai negara ini
                                dibersihkan dari syirik dan bentuknya, pertolongan Allah SWT tidak akan datang. Sekarang
                                Anda
                                katakan kepada saya, apa arti kata Pakistan? Itu tempat yang suci. Tempat yang murni,
                                berarti
                                tempat dimana tidak ada kesyirikan. Allah SWT tidak akan membantu Pakistan, sampai
                                syirik
                                dan
                                bentuknya disingkirkan dari negara ini. Sekarang, apa yang telah terjadi, sudah 27
                                tahun,
                                banyak
                                pemimpin politik telah datang (memerintah), darurat militer pernah diberlakukan, kita
                                melihat
                                berbagai bentuk pemerintahan, dan mereka semua berusaha membawa kemajuan dan kemakmuran
                                untuk
                                Pakistan, tetapi kemakmuran itu tidak pernah terwujud. Semua rencana yang dibuat tidak
                                berhasil
                                dan tidak ada kemajuan yang dapat kita harapkan. Itu semua karena kita telah berhenti
                                melindungi
                                diri dari syirik dan bentuknya. Ketika Pakistan dibersihkan dari syirik dan bentuknya,
                                maka
                                Allah SWT akan membantu, rencana kita akan berhasil seperti yang diharapkan, dan Allah
                                SWT
                                akan
                                mulai
                                menghujani berkah dan rahmat-Nya.</p>
                            <p>Sebagaimana Nabi Ibrahim a.s menghancurkan berhala dan Nabi Muhammad SAW juga
                                menghancurkan
                                berhala
                                saat menaklukkan Mekkah dan membersihkan tempat itu dari kesyirikan. Sekarang Anda lihat
                                saya,
                                saya bukanlah orang yang sangat religius; saya seperti yang ada dihadapan Anda. Lalu apa
                                yang
                                datang kepada saya dalam mimpi saya, mengapa Allah SWT membantu saya, itu karena saya
                                berusaha
                                semampu saya untuk melindungi diri saya dari syirik dan bentuk-bentuknya. Jadi hanya
                                karena
                                itu,
                                Allah SWT Yang Maha Kuasa membantu saya dan orang-orang yang mempercayai mimpi saya,
                                belum
                                pernah
                                saya temui sebelumnya, saya bahkan tidak mengenal mereka, mereka mempercayai mimpi-mimpi
                                ini,
                                dari seluruh dunia dan mereka menerjemahkannya ke dalam bahasa mereka sendiri dan mereka
                                menyebarkannya. Jika saya melakukannya, itu tidak mungkin tanpa bantuan Allah SWT.</p>
                        </div>
                    </div>

                    <!-- FAQ 7 -->
                    <div class="faq-item">
                        <button class="faq-question">
                            <span>Kapan mimpi Anda akan terwujud?</span>
                            <svg class="faq-icon" viewBox="0 0 24 24">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>Dalam mimpi saya, tanda pertama dari mimpi saya adalah, akan ada upaya untuk membuat
                                Pakistan
                                tidak stabil dan membaginya menjadi beberapa bagian. Semoga Allah SWT tidak membiarkan
                                hal
                                seperti
                                itu terjadi di Pakistan. Namun, mereka yang menjadi musuh Pakistan, seperti yang Anda
                                katakan
                                bahwa banyak negara di Timur Tengah hancur atau seperti tragedi Arab Spring (Protes di
                                Arab
                                pada
                                tahun 2010) terjadi di tempat yang sama, mereka juga ingin melakukan sesuatu seperti itu
                                di
                                Pakistan. Namun kemudian Allah SWT membantu Pakistan dan seperti yang saya katakan,
                                mimpi-mimpi
                                ini
                                sampai kepada Kepala Angkatan Darat sehingga dia mendapatkan kesaksian, kemudian
                                lembaga-lembaga
                                Pakistan membuat rencana sesuai dengan mimpi untuk menyelamatkan Pakistan. Kemudian
                                Allah
                                SWT
                                membantu Pakistan, dan kita tidak hanya berhasil menyelamatkan Pakistan tetapi Pakistan
                                maju
                                dengan sangat cepat. Kemudian semua perbendaharaan Allah SWT dan kedamaian serta
                                berkah-Nya
                                mulai
                                berdatangan di Pakistan.</p>
                        </div>
                    </div>

                    <!-- FAQ 8 -->
                    <div class="faq-item">
                        <button class="faq-question">
                            <span>Menurut Anda, apa arti mimpi?</span>
                            <svg class="faq-icon" viewBox="0 0 24 24">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>Dalam Islam, mimpi memiliki arti yang sangat penting. Nabi Muhammad SAW bersabda bahwa;
                                â€˜Kenabian
                                berakhir bersamanya, dan mata rantai wahyu pun berakhir, tetapi â€œKabar Baikâ€
                                (Mubasyirat)
                                akan
                                terus berlanjut. Para sahabat bertanya, apa yang dimaksud dengan â€œKabar Baikâ€ ini?
                                dan
                                Nabi
                                Muhammad SAW menjawab bahwa itu adalah mimpi benar (nyata). Jika Anda telah mempelajari
                                sejarah,
                                Anda akan tahu bahwa Nuruddin Zangi juga bermimpi di mana ia diberi tahu tentang dua
                                orang
                                yang
                                bermaksud untuk menggali makam Nabi Muhammad SAW. Ia kemudian mencari di seluruh Madinah
                                dan
                                menemukan orang-orang itu lalu memenggal kepala mereka. Ditemukan bahwa mereka memang
                                hampir
                                mencapai makam beliau yang diberkahi. Dari sini, Anda dapat memahami pentingnya mimpi
                                dalam
                                Islam.</p>
                        </div>
                    </div>

                    <!-- FAQ 9 -->
                    <div class="faq-item">
                        <button class="faq-question">
                            <span>Anda termasuk dari golongan (Mazhab) yang mana?</span>
                            <svg class="faq-icon" viewBox="0 0 24 24">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>Saya mengikuti agama Nabi Muhammad SAW dan Insya Allah SWT saya akan tetap teguh di atas
                                jalan
                                itu.
                                Saya juga berdoa kepada Allah SWT agar saya meninggal dengan mengikuti agama Nabi
                                Muhammad SAW.
                                Adapun
                                yang lainnya, saya adalah seorang Muslim Sunni. Saya tidak pernah benar-benar memahami
                                golongan
                                (Mazhab) ini. Dalam mimpi saya, saya telah diperlihatkan bahwa jalan Nabi Muhammad SAW
                                adalah
                                jalan
                                terbaik. Saya mencoba mengikuti jalan itu, dan seluruh upaya saya adalah untuk mencapai
                                Allah SWT,
                                Tuhan seluruh alam dengan mengikuti jalan itu.</p>
                        </div>
                    </div>

                    <!-- FAQ 10 -->
                    <div class="faq-item">
                        <button class="faq-question">
                            <span>Pernahkah Anda menyampaikan mimpi-mimpi ini kepada tokoh penting?</span>
                            <svg class="faq-icon" viewBox="0 0 24 24">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>Saya sendiri pernah saya menyampaikan mimpi-mimpi saya melalui email ke berbagai
                                organisasi
                                pemerintah dan situs web militer. Kemudian, pada bulan Desember s/d Januari 2015, saya
                                mulai
                                menyebarkan mimpi-mimpi ini secara terbuka di internet dan setelah itu, orang-orang
                                mulai
                                mempercayainya. Jika Anda perhatikan, Anda akan melihat bahwa saya tidak memiliki
                                kepentingan
                                pribadi dalam hal ini. Jika saya memiliki kepentingan 1% saja, saya akan menyampaikan
                                secara
                                langsung di YouTube dengan orang-orang seperti Saudara Waqas dan Imran; saya akan
                                melakukannya
                                sendiri.</p>
                        </div>
                    </div>

                    <!-- FAQ 11 -->
                    <div class="faq-item">
                        <button class="faq-question">
                            <span>Apa kata ulama tentang mimpi Anda?</span>
                            <svg class="faq-icon" viewBox="0 0 24 24">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>Saya dan teman-teman saya mengirim email ke banyak ulama terkenal di media sosial,
                                menyampaikan
                                mimpi-mimpi ini kepada mereka, tetapi saya tidak menerima tanggapan apapun dari mereka.
                            </p>
                        </div>
                    </div>

                    <!-- FAQ 12 -->
                    <div class="faq-item">
                        <button class="faq-question">
                            <span>Apakah akan ada perang lagi antara Pakistan dan India di masa depan?</span>
                            <svg class="faq-icon" viewBox="0 0 24 24">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>Perang yang sangat dahsyat akan dikenakan atas Pakistan, yang dikenal sebagai
                                â€œGhazwatul
                                Hindâ€
                                yang dinubuatkan dalam hadist. Dalam perang ini, Pakistan akan berada di satu pihak
                                sendirian,
                                dan musuh-musuh Islam dan musuh Pakistan akan berada di pihak yang lain. Dalam perang
                                ini,
                                Allah SWT akan membantu Pakistan dengan sekitar 3000 jet tempur hitam, dan Pakistan akan
                                memenangkan perang ini dengan pertolongan Allah SWT. Setelah itu, Pakistan akan bergerak
                                ke
                                Timur
                                Tengah, mengalahkan negara-negara adidaya seperti Rusia dan Amerika. Dan tidak hanya
                                itu,
                                Pakistan juga akan merebut kembali wilayah-wilayah yang hilang dari umat Islam di Timur
                                Tengah
                                dan Turki. Pakistan kemudian akan membangun kembali wilayah-wilayah ini dan menyebarkan
                                Islam
                                sejati Nabi Muhammad SAW.</p>
                        </div>
                    </div>

                    <!-- FAQ 13 -->
                    <div class="faq-item">
                        <button class="faq-question">
                            <span>Menurut mimpi Anda, apa hal terburuk yang akan terjadi, dan apa kabar baiknya?</span>
                            <svg class="faq-icon" viewBox="0 0 24 24">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>Hal terburuk adalah kehancuran umat Islam, di mana mereka terus menderita, yaitu yang
                                disebut
                                Perang Dunia III. Perang itu dimulai di Timur Tengah, dan bahkan Muslim akan kehilangan
                                Turki.
                                Banyak wilayah di Timur Tengah yang hilang, dan saya telah melihat pemandangan yang
                                sangat
                                menyedihkan akibat perang ini dalam mimpi saya. Kabar baiknya adalah, Allah SWT membantu
                                Pakistan.
                                Dalam mimpi saya, saya telah melihat tiga benteng, salah satunya adalah Pakistan. Allah
                                SWT
                                membantu Pakistan dan akhirnya Pakistan menguasai seluruh dunia, yang kemudian dipenuhi
                                dengan
                                kedamaian.</p>
                        </div>
                    </div>

                    <!-- FAQ 14 -->
                    <div class="faq-item">
                        <button class="faq-question">
                            <span>Apakah Anda diorbitkan oleh sebuah Agensi?</span>
                            <svg class="faq-icon" viewBox="0 0 24 24">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>Anda dapat melihat postingan pertama saya di internet; itu masih ada di sana. Dengan
                                melihat
                                postingan itu, Anda dapat dengan mudah mengetahui bahwa saya bukan orang yang cukup
                                pintar.
                                Itu
                                sama sekali tidak profesional. Postingan yang saya buat di Facebook dan video yang saya
                                unggah
                                di YouTubeâ€”jika Anda membacanya dalam bahasa Inggris, akan tampak seperti ditulis oleh
                                anak
                                kelas 5 atau 6 sekolah dasar. Jika sebuah agensi meluncurkan seseorang, mereka
                                melakukannya
                                dengan cara yang profesional, memastikan tidak ada kekurangan atau celah, bahasa yang
                                profesional, dan profesional dalam segala aspek. Anda dapat melihat postingan pertama
                                saya;
                                seluruh riwayatnya tersedia di internet. Anda dapat memeriksanya sendiri. Hal penting
                                lainnya
                                adalah, jika sebuah agensi ingin mengorbitkan seseorang, mereka akan memilih orang yang
                                terkenal, seseorang yang sudah memiliki pengikut. Mengapa mereka memilih seseorang
                                seperti
                                saya
                                untuk diorbitkan dengan cara seperti itu? Bahkan saya tidak dikenal di lingkungan saya
                                sendiri.
                            </p>
                        </div>
                    </div>

                    <!-- FAQ 15 -->
                    <div class="faq-item">
                        <button class="faq-question">
                            <span>Apakah orang-orang percaya pada mimpi Anda atau tidak?</span>
                            <svg class="faq-icon" viewBox="0 0 24 24">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                            </svg>
                        </button>
                        <div class="faq-answer">
                            <p>Anda dapat melihat bahwa saya adalah orang biasa, hampir tidak dikenal bahkan di
                                lingkungan
                                saya
                                sendiri. Namun ketika saya mulai menyebarkan mimpi-mimpi ini, saya sendirian saat itu.
                                Sekarang,
                                dengan Rahmat Allah SWT, Anda dapat melihat bahwa orang-orang dari seluruh dunia, bahkan
                                banyak
                                yang belum pernah saya temui, percaya pada mimpi-mimpi ini. Ada orang-orang yang belum
                                pernah
                                saya temui dan bahkan belum pernah saya ajak bicara. Namun mereka tidak hanya percaya
                                pada
                                mimpi-mimpi saya, mereka juga telah menerjemahkannya ke dalam bahasa mereka, membuat
                                video,
                                dan
                                mengunggahnya. Ini tidak dapat terjadi tanpa pertolongan Allah SWT.</p>
                            <p>Sebagian orang mengatakan bahwa apa yang dipikirkan di siang hari sama dengan apa yang
                                dimimpikan
                                di malam hari. Akan tetapi, saat ini banyak ulama yang tugasnya hanya membimbing manusia
                                dalam
                                hal agama dan berdakwah, tetapi hanya sedikit yang mengalami mimpi seperti itu.
                                Mimpi-mimpi
                                itu
                                jumlahnya sangat banyak, jadi ini adalah bukti bahwa belum tentu apa yang dipikirkan
                                atau
                                dilakukan seseorang di siang hari sama dengan apa yang dimimpikannya di malam hari.
                                Allah
                                SWT
                                selalu menciptakan sesuatu yang unik, dan jika mimpi-mimpi tersebut belum pernah dialami
                                atau
                                diciptakan oleh siapa pun sebelumnya, berarti mimpi-mimpi itu memang istimewa dan
                                berasal
                                dari
                                Allah SWT.</p>
                        </div>
                    </div>

                </div>
            </section>

            <!-- KOLEKSI AUDIO SECTION -->
            <div class="audio-collection-section" style="margin-top: 40px; margin-bottom: 20px;">
                <div class="section-label">
                    <span>KOLEKSI AUDIO</span>
                    <div class="section-line"></div>
                </div>

                <!-- Horizontal Scroll Container (Reusing dream-scroll-container style) -->
                <div class="dream-scroll-container" id="audio-collection-scroll">
                    <div class="loader" style="width:100%; text-align:center; padding:20px;">Memuat Audio...</div>
                </div>

                <!-- Link More -->
                <div style="text-align: center; margin-top: 15px;">
                    <a href="audio.html"
                        style="color: var(--primary); text-decoration: none; font-weight: bold; font-size: 0.9rem; border: 1px solid var(--primary); padding: 8px 20px; border-radius: 20px; display: inline-block; transition: all 0.3s;"
                        onmouseover="this.style.background='var(--primary)'; this.style.color='white'"
                        onmouseout="this.style.background='transparent'; this.style.color='var(--primary)'">
                        Lihat Koleksi Audio Lainnya &rarr;
                    </a>
                </div>
            </div>

            <script>
                // LOGIC KOLEKSI AUDIO
                document.addEventListener("DOMContentLoaded", () => {
                    const AUDIO_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTOAltvE7tpJsTkKbqMoqLZe-7K9cGk_uPUqeigV7qvWUm5crdAiOJ_hNAvchnjNrE8cA0F-ybuZhKd/pub?gid=1549454662&single=true&output=csv";

                    if (window.Papa) {
                        Papa.parse(AUDIO_CSV_URL, {
                            download: true, header: true, skipEmptyLines: true,
                            complete: (res) => {
                                if (res.data && res.data.length > 0) renderAudioCollection(res.data);
                                else document.getElementById('audio-collection-scroll').innerHTML = "<div style='text-align:center;width:100%'>Belum ada data audio.</div>";
                            },
                            error: () => document.getElementById('audio-collection-scroll').innerHTML = "<div style='text-align:center;width:100%'>Gagal memuat data audio.</div>"
                        });
                    }

                    function renderAudioCollection(data) {
                        const container = document.getElementById('audio-collection-scroll');
                        if (!container) return;

                        container.innerHTML = "";

                        // Limit 6 items
                        const limited = data.slice(0, 6);

                        // Gunakan Helper getVal yang sama jika ada, atau buat baru
                        const getVal = (obj, k) => obj[Object.keys(obj).find(key => key.toLowerCase() === k.toLowerCase())] || "";

                        let html = "";
                        limited.forEach(item => {
                            const title = getVal(item, 'judul') || getVal(item, 'title') || "Tanpa Judul";
                            let thumb = getVal(item, 'gambar') || getVal(item, 'image') || getVal(item, 'thumbnail');

                            if (!thumb || thumb.trim() === "") thumb = "ALT_LogoMQN.png";

                            // Handle Google Drive Images
                            if (thumb.includes('drive.google.com') && thumb.includes('/file/d/')) {
                                const matches = thumb.match(/\/d\/(.+?)\//);
                                if (matches && matches[1]) thumb = `https://drive.google.com/uc?export=view&id=${matches[1]}`;
                            }

                            html += `
                                <a href="pasca-audio.html?bg=${encodeURIComponent(title)}" class="dream-card" style="width:160px; min-width:160px; height:160px; aspect-ratio:1/1; display:flex; flex-direction:column; padding:0; overflow:hidden; text-decoration:none; margin-right:15px;">
                                    <div class="dream-thumb" style="width:100%; height:65%; border-radius:0; position:relative;">
                                        <img src="${thumb}" alt="thumb" loading="lazy" style="width:100%; height:100%; object-fit:cover;" onerror="this.src='ALT_LogoMQN.png'">
                                        <!-- Play Icon Overlay -->
                                        <div style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); background:rgba(0,0,0,0.6); border-radius:50%; width:40px; height:40px; display:flex; align-items:center; justify-content:center; box-shadow: 0 2px 5px rgba(0,0,0,0.3);">
                                            <svg viewBox="0 0 24 24" fill="white" width="20" height="20" style="margin-left:2px;"><path d="M8 5v14l11-7z"/></svg>
                                        </div>
                                    </div>
                                    <div class="dream-info" style="width:100%; height:35%; display:flex; align-items:center; justify-content:center; padding:5px 10px; background:var(--bg-card); border-top:1px solid var(--border);">
                                        <h4 class="dream-title" style="font-size:0.8rem; line-height:1.2; margin:0; text-align:center; display:-webkit-box; -webkit-line-clamp:3; -webkit-box-orient:vertical; overflow:hidden; color:var(--text-main) !important; font-weight:700; font-family:'Lato', sans-serif; text-shadow:none;">${title}</h4>
                                    </div>
                                </a>
                             `;
                        });

                        container.innerHTML = html;
                    }
                });
            </script>

            <!-- AD PLACEHOLDER SLIM (IKLAN) -->
            <div class="ad-box-slim">
                IKLAN
            </div>
        </main>

        <!-- STYLES FOR FAQ (Embedded for Speed) -->
        <style>
            /* AD BOX SLIM STYLE */
            .ad-box-slim {
                width: 100%;
                height: 50px;
                /* Lebih gepeng dari banner */
                background: #f4f4f4;
                color: #aaa;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 0.75rem;
                font-weight: 700;
                letter-spacing: 2px;
                border: 1px dashed #ddd;
                margin: 30px 0;
                /* Spacing yang pas */
                border-radius: 4px;
                text-transform: uppercase;
            }

            body.dark-mode .ad-box-slim {
                background: rgba(255, 255, 255, 0.03);
                border-color: rgba(255, 255, 255, 0.1);
                color: #555;
            }

            .faq-item {
                margin-bottom: 12px;
                border: 1px solid var(--border);
                border-radius: 8px;
                overflow: hidden;
                background: var(--bg-card);
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.02);
                transition: all 0.3s ease;
            }

            body.dark-mode .faq-item {
                border-color: rgba(255, 255, 255, 0.1);
            }

            .faq-question {
                width: 100%;
                text-align: left;
                background: none;
                border: none;
                padding: 15px 20px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                cursor: pointer;
                font-family: 'Lato', sans-serif;
                font-weight: 700;
                font-size: 1rem;
                color: var(--text-main);
                transition: background 0.2s;
            }

            .faq-question:hover {
                background-color: rgba(0, 0, 0, 0.03);
            }

            body.dark-mode .faq-question:hover {
                background-color: rgba(255, 255, 255, 0.05);
            }

            .faq-icon {
                width: 20px;
                height: 20px;
                fill: var(--primary);
                transition: transform 0.3s ease;
            }

            .faq-answer {
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.4s cubic-bezier(0, 1, 0, 1);
                background-color: rgba(0, 0, 0, 0.02);
            }

            body.dark-mode .faq-answer {
                background-color: rgba(255, 255, 255, 0.02);
            }

            .faq-answer p {
                padding: 15px 20px;
                margin: 0;
                font-size: 0.95rem;
                line-height: 1.6;
                color: var(--text-muted);
            }

            /* Active State */
            .faq-item.active {
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
                /* More pop */
                border-color: var(--primary);
                /* Highlight border */
            }

            .faq-item.active .faq-icon {
                transform: rotate(45deg);
                /* Spin to X or Minus */
                fill: #d32f2f;
            }

            .faq-item.active .faq-question {
                color: var(--primary);
            }

            .faq-item.active .faq-answer {
                max-height: 1000px;
                /* Arbitrary large height for animation */
                transition: max-height 0.5s ease-in-out;
            }

            .hidden-row {
                display: none;
            }
        </style>

        <!-- SCRIPT FOR FAQ (Simple Toggle) -->
        <script>
            document.querySelectorAll('.faq-question').forEach(button => {
                button.addEventListener('click', () => {
                    const item = button.parentElement;
                    const isActive = item.classList.contains('active');

                    if (!isActive) {
                        item.classList.add('active');
                    } else {
                        item.classList.remove('active');
                    }
                });
            });
        </script>

    </div><!-- END DESKTOP MAIN WRAPPER -->

    <footer>
        <div class="footer-content">
            <div class="footer-col">
                <div class="footer-logo">
                    <img src="MQ_LogoSecond.png" alt="Logo White">
                </div>
                <p>
                    MQ News Today berdedikasi untuk menyajikan informasi yang sering luput dari media arus utama.
                    Fokus pada kebenaran dan analisis mendalam.
                </p>
            </div>

            <div class="footer-col">
                <h3>Kategori</h3>
                <div class="footer-links">
                    <a href="#" onclick="setCategory(null, 'Semua')">Beranda</a>
                    <a href="#" onclick="setCategory(null, 'Geopolitik')">Geopolitik</a>
                    <a href="#" onclick="setCategory(null, 'Eskatologi')">Eskatologi</a>
                    <a href="#" onclick="setCategory(null, 'Mimpi Qasim')">Mimpi Qasim</a>
                    <a href="#" onclick="setCategory(null, 'Timur Tengah')">Timur Tengah</a>
                    <a href="#" onclick="setCategory(null, 'Trending')">Trending</a>
                </div>
            </div>

            <div class="footer-col">
                <h3>Hubungi Kami</h3>
                <a href="https://wa.me/6285705856030" target="_blank" class="footer-wa-link">
                    (+62) 857-0585-6030
                </a>
            </div>

            <div class="footer-col">
                <h3>Informasi & Legal</h3>
                <div class="footer-links">
                    <a href="tentang-kami.html">Tentang Kami</a>
                    <a href="privacy-policy.html">Kebijakan Privasi</a>
                    <a href="disclaimer.html">Disclaimer</a>
                    <a href="terms.html">Syarat & Ketentuan</a>
                </div>
            </div>
        </div>

        <div class="social-icons-group article-mode">

            <a href="https://x.com/MQNewsToday" target="_blank" class="soc-link" aria-label="X Twitter">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
                </svg>
            </a>

            <a href="https://www.instagram.com/mqnews.today?igsh=Z2hlM3pyeno3ZDY2" target="_blank" class="soc-link"
                aria-label="Instagram">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" />
                </svg>
            </a>

            <a href="https://www.tiktok.com/@mqnews.today?_r=1&_t=ZS-92THjGhQHkD" target="_blank" class="soc-link"
                aria-label="TikTok">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z" />
                </svg>
            </a>

            <a href="https://www.youtube.com/@MQNewsToday" target="_blank" class="soc-link" aria-label="YouTube">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z" />
                </svg>
            </a>

        </div>


        <div class="copyright">
            <a href="tentang-kami.html" style="text-decoration: none; color: inherit;">
                ©2026 MQ News Today
            </a>
        </div>
    </footer>


    <div id="logoutModal" class="custom-modal-overlay">
        <div class="custom-modal-box">
            <h3 class="modal-title">Konfirmasi</h3>
            <p class="modal-desc">Apakah Anda yakin ingin keluar dari akun?</p>
            <div class="modal-actions">
                <button id="btnCancelLogout" class="modal-btn btn-cancel">Batal</button>
                <button id="btnConfirmLogout" class="modal-btn btn-yes">Ya, Keluar</button>
            </div>
        </div>
    </div>

    <div id="limitModal" class="custom-modal-overlay">
        <div class="custom-modal-box">
            <h3 class="modal-title" style="color: var(--primary);">Batas Akses Tamu</h3>
            <p class="modal-desc">Anda telah membaca <strong>3 berita gratis</strong>. Silakan masuk atau daftar
                untuk
                akses tanpa batas.</p>
            <div class="modal-actions">
                <button onclick="document.getElementById('limitModal').style.display='none'"
                    class="modal-btn btn-cancel">Nanti Saja</button>
                <button onclick="window.location.href='login.html'" class="modal-btn btn-yes">Masuk /
                    Daftar</button>
            </div>
        </div>
    </div>

    <div id="notifBox" class="custom-notif">
        <div id="notifIcon"></div>
        <span id="notifText">Pesan notifikasi...</span>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>

    <!-- FIREBASE INIT MODULE -->
    <script type="module">
        import { auth } from "./firebase-config.js";
        import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import bookmarkManager from "./bookmark-manager.js"; // Import Bookmark Manager

        // Expose auth to global window so non-module scripts can use it
        window.auth = auth;
        window.bookmarkManager = bookmarkManager;

        // Listener: Re-render news when bookmarks are loaded (to update save icons)
        window.addEventListener('bookmarks-loaded', () => {
            // Re-render current page if data exists and news has been loaded
            if (typeof renderPage === 'function' && typeof currentPage !== 'undefined') {
                // PENTING: Gunakan variabel global yang benar
                if (window.activeData && window.activeData.length > 0) {
                    renderPage(currentPage);
                    if (typeof renderEditorPicks === 'function') renderEditorPicks();
                }
            }
        });

        // AUTH LISTENER: Update Sidebar UI
        onAuthStateChanged(auth, (user) => {
            const link = document.getElementById('auth-link');
            const text = document.getElementById('auth-text');
            const logoutBtn = document.getElementById('logout-btn');
            const adminMenu = document.getElementById('admin-dropdown');

            if (user) {
                // USER LOGIN
                const name = user.displayName || user.email.split('@')[0];
                text.innerText = "HALO, " + name.toUpperCase();
                link.href = "profil.html"; // Arahkan ke profil

                // SHOW ADMIN MENU IF UID MATCHES
                if (user.uid === "hUyS8nHwwcOBU6cgPvAbO7cKDTj2") {
                    if (adminMenu) adminMenu.style.display = "block";
                } else {
                    if (adminMenu) adminMenu.style.display = "none";
                }

                if (logoutBtn) {
                    logoutBtn.style.display = "flex";
                    logoutBtn.onclick = (e) => {
                        e.preventDefault();
                        document.getElementById('logoutModal').classList.add('active');
                    };
                }
            } else {
                // USER LOGOUT
                text.innerText = "MASUK / DAFTAR";
                link.href = "login.html";
                if (logoutBtn) logoutBtn.style.display = "none";
                if (adminMenu) adminMenu.style.display = "none";
            }
        });

        // LOGOUT LOGIC
        document.getElementById('btnConfirmLogout').addEventListener('click', async () => {
            // FIX: Reset limit baca tamu saat logout agar user mulai dari 0 lagi sebagai tamu
            localStorage.removeItem('guest_read_count');
            sessionStorage.removeItem('last_read_url');

            await signOut(auth);
            document.getElementById('logoutModal').classList.remove('active');
            window.location.reload();
        });

        document.getElementById('btnCancelLogout').addEventListener('click', () => {
            document.getElementById('logoutModal').classList.remove('active');
        });
    </script>

    <script>
        // --- KONFIGURASI ---
        const sheetID = "1FDzhBlVOFlnlQgphN2gsGJUdDeFWonpoJcadY8JqUcM";

        // Variabel Global (Gunakan var agar nempel ke window)
        var allNews = [];         // Semua berita mentah dari CSV
        var activeData = [];      // Berita yang sedang aktif (bisa hasil search/filter)
        var currentPage = 1;      // Halaman aktif sekarang
        const BATCH_SIZE = 6;     // Jumlah berita per halaman (6 berita)

        // --- 1. INIT: AMBIL DATA ---
        async function init() {
            // Hapus cache: no-store biar LOADING CEPET lagi kayak dulu
            const url = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTOAltvE7tpJsTkKbqMoqLZe-7K9cGk_uPUqeigV7qvWUm5crdAiOJ_hNAvchnjNrE8cA0F-ybuZhKd/pub?gid=0&single=true&output=csv";

            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error(`HTTP Error: ${response.status}`);
                const text = await response.text();

                Papa.parse(text, {
                    header: true,
                    skipEmptyLines: true,
                    complete: function (results) {
                        try {
                            allNews = results.data.filter(item => {
                                const t = getVal(item, 'judul') || getVal(item, 'title');
                                return t && t.trim().length > 0;
                            });

                            if (!allNews || allNews.length === 0) {
                                throw new Error("Data CSV Kosong / Format Salah");
                            }

                            activeData = allNews.slice().reverse();

                            // Render Utama with protection
                            try { resetRender(); } catch (e) { console.error("Render Error:", e); }

                            if (typeof updateClock === 'function') updateClock();

                            // Render Pilihan Editor with protection
                            if (typeof renderEditorPicks === 'function') {
                                renderEditorPicks();
                            }
                        } catch (parseLogicErr) {
                            showError("Data Error: " + parseLogicErr.message);
                        }
                    },
                    error: function (err) {
                        showError("Papa Parse Error: " + err.message);
                    }
                });
            } catch (err) {
                console.error(err);
                showError("Koneksi Gagal: " + err.message);
            }
        }

        function showError(msg) {
            const nc = document.getElementById('news-container');
            if (nc) nc.innerHTML = `<div class='no-data' style='color:red;'>${msg}</div>`;
        }

        // Global Helper: Case Insensitive Getter (PENTING: JANGAN DIHAPUS)
        const getVal = (obj, str) => {
            if (!obj) return "";
            const key = Object.keys(obj).find(k => k.toLowerCase() === str.toLowerCase());
            return key ? obj[key] : "";
        };

        // Fungsi Render PILIHAN EDITOR (Global Scope)
        window.renderEditorPicks = function () {
            const container = document.getElementById('editor-picks-container');
            if (!container) return;

            container.innerHTML = "";

            // Pastikan allNews ada
            if (!allNews || allNews.length === 0) {
                container.innerHTML = '<div class="loader" style="color:red;">Menunggu data...</div>';
                return;
            }

            // Ambil 3 Berita Terbaru (Filter yang judulnya ada)
            let source = allNews.slice().reverse().filter(item => {
                const j = getVal(item, 'judul') || getVal(item, 'title');
                return j && j.trim().length > 0;
            });

            const selected = source.slice(0, 3);

            selected.forEach(item => {
                const judul = getVal(item, 'judul') || getVal(item, 'title');
                const tanggal = getVal(item, 'tanggal') || getVal(item, 'date');
                let gambar = getVal(item, 'gambar') || getVal(item, 'image') || getVal(item, 'thumbnail');

                if (!gambar || gambar.length < 5) gambar = "https://via.placeholder.com/150x100?text=MQ";

                const targetUrl = 'baca.html?title=' + encodeURIComponent(judul);

                // Check Bookmark Status (Sync)
                // Use global bookmarkManager if available
                const isSaved = window.bookmarkManager ? window.bookmarkManager.isBookmarkedSync('news', judul) : false;

                // Optional: visual indicator for saved items in editor picks
                const savedBadge = isSaved ? `<div style="position:absolute; top:5px; right:5px; background:white; border-radius:50%; padding:2px;"><svg width="12" height="12" fill="#d32f2f" viewBox="0 0 24 24"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg></div>` : '';

                const html = `
                <a href="${targetUrl}" class="editor-card" style="position:relative;">
                    ${savedBadge}
                    <div class="editor-thumb">
                        <img src="${gambar}" loading="lazy" alt="thumb" onerror="this.src='https://via.placeholder.com/150x100?text=Err'">
                    </div>
                    <div class="editor-info">
                        <h4 class="editor-title">${judul}</h4>
                        <span class="editor-date">${tanggal}</span>
                    </div>
                </a>
                `;
                container.insertAdjacentHTML('beforeend', html);
            });
        };

        // --- SCRIPT JAM REDAKSI ---
        function updateClock() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const dateStr = now.toLocaleDateString('id-ID', options);
            const timeStr = now.toLocaleTimeString('id-ID'); // Jam:Menit:Detik

            const el = document.getElementById('live-date');
            if (el) el.innerText = `${dateStr} | ${timeStr} WIB`;
        }
        setInterval(updateClock, 1000); // Update tiap detik
        updateClock(); // Jalanin langsung pas load

        // --- SCRIPT BANNER OTOMATIS (GOOGLE SHEET) ---
        document.addEventListener('DOMContentLoaded', () => {
            // 1. MASUKKAN LINK CSV SHEET "BANNER" LU DI SINI:
            const BANNER_SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTOAltvE7tpJsTkKbqMoqLZe-7K9cGk_uPUqeigV7qvWUm5crdAiOJ_hNAvchnjNrE8cA0F-ybuZhKd/pub?gid=530510330&single=true&output=csv";

            const container = document.getElementById('banner-container');
            const track = document.getElementById('banner-track');

            // Fungsi Parse CSV (Sama kayak berita)
            function parseCSV(text) {
                const rows = text.split('\n').slice(1); // Buang header baris 1
                return rows.map(row => {
                    // Split koma (regex ini menangani koma di dalam tanda kutip)
                    const cols = row.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g);
                    if (!cols) return null;
                    return {
                        img: cols[0]?.replace(/"/g, '').trim(),
                        caption: cols[1]?.replace(/"/g, '').trim(),
                        link: cols[2]?.replace(/"/g, '').trim()
                    };
                }).filter(item => item && item.img); // Hanya ambil yg ada gambarnya
            }

            // Fungsi Render Banner (Versi Aman & Support Link Lokal)
            async function loadBanner() {
                try {
                    const res = await fetch(BANNER_SHEET_URL);
                    const text = await res.text();
                    let data = parseCSV(text); // Tetap pakai parseCSV kamu

                    // LIMIT CUMA 3 GAMBAR
                    if (data.length > 3) data = data.slice(0, 3);

                    if (data.length > 0) {
                        // Tampilkan Container
                        container.style.display = 'block';
                        track.innerHTML = ''; // Bersihkan

                        data.forEach((item, index) => {
                            const activeClass = index === 0 ? 'active' : '';

                            // --- LOGIKA BARU: CEK LINK LOKAL vs LUAR ---
                            let tag = 'div';
                            let hrefAttr = '';
                            let styleAttr = '';

                            // Cek kolom link ada isinya gak?
                            if (item.link && item.link.trim() !== '') {
                                tag = 'a'; // Jadiin link

                                // Cek apakah link luar (http) atau lokal?
                                const target = item.link.includes('http') ? '_blank' : '_self';

                                hrefAttr = `href="${item.link}" target="${target}"`;
                                styleAttr = 'style="cursor:pointer; display:block; text-decoration:none;"';
                            }
                            // --------------------------------------------

                            const html = `
                        <${tag} ${hrefAttr} ${styleAttr} class="banner-slide ${activeClass}" data-index="${index}">
                            <img src="${item.img}" alt="Banner ${index + 1}">
                            ${item.caption ? `<div class="banner-caption">${item.caption}</div>` : ''}
                        </${tag}>
                    `;
                            track.innerHTML += html;
                        });

                        // Jalankan Auto Slide (Tetap pakai fungsi kamu)
                        if (data.length > 1) startSlider();
                    }

                } catch (err) {
                    console.error("Gagal muat banner:", err);
                    container.style.display = 'none';
                }
            }


            // Logika Auto Slide (Fade Effect)
            function startSlider() {
                const slides = document.querySelectorAll('.banner-slide');
                let current = 0;

                setInterval(() => {
                    // Sembunyikan yg sekarang
                    slides[current].classList.remove('active');

                    // Pindah ke selanjutnya
                    current = (current + 1) % slides.length;

                    // Munculkan yg baru
                    slides[current].classList.add('active');
                }, 5000); // Ganti tiap 5 Detik
            }

            // JALANKAN!
            loadBanner();
        });




        // --- 2. SISTEM RENDER & PAGINATION (INTI BARU) ---

        // Reset layar sebelum menampilkan hasil baru
        function resetRender() {
            currentPage = 1; // Reset ke halaman 1
            renderPage(currentPage);
        }

        // Render Halaman Tertentu
        function renderPage(page) {
            const container = document.getElementById('news-container');
            container.innerHTML = ""; // Bersihkan layar

            if (activeData.length === 0) {
                container.innerHTML = `<div class="no-data">Tidak ditemukan berita.</div>`;
                return;
            }

            // Hitung Index Start & End
            const start = (page - 1) * BATCH_SIZE;
            const end = start + BATCH_SIZE;
            const batch = activeData.slice(start, end);

            // Render Berita
            batch.forEach(item => {
                const html = createCardHTML(item);
                container.insertAdjacentHTML('beforeend', html);
            });

            // Render Pagination Control
            renderPaginationControls(page);
        }

        // Render Tombol Pagination (1, 2, 3...)
        function renderPaginationControls(page) {
            const container = document.getElementById('news-container');
            const totalPages = Math.ceil(activeData.length / BATCH_SIZE);

            if (totalPages <= 1) return; // Kalau cuma 1 halaman, gak perlu tombol

            let buttonsHTML = '';

            // Tombol Prev
            if (page > 1) {
                buttonsHTML += `<button onclick="goToPage(${page - 1})" class="page-btn" aria-label="Previous">&lsaquo;</button>`;
            }

            // Logic Smart Pagination (biar gak kepanjangan kalau halaman banyak)
            // Tampilkan: 1 ... [current-1] [current] [current+1] ... [last]
            // Tapi User request "1, 2, 3... dst". Kita kasih limit sederhana biar rapi kalo datanya ratusan.

            // Untuk sekarang kita loop semua jika < 10 halaman. Jika > 10 kita slicing.
            let startPage = 1;
            let endPage = totalPages;

            // Render Buttons
            for (let i = startPage; i <= endPage; i++) {
                const activeClass = i === page ? 'active' : '';
                buttonsHTML += `<button onclick="goToPage(${i})" class="page-btn ${activeClass}">${i}</button>`;
            }

            // Tombol Next
            if (page < totalPages) {
                buttonsHTML += `<button onclick="goToPage(${page + 1})" class="page-btn" aria-label="Next">&rsaquo;</button>`;
            }

            const wrapper = `
                <div class="pagination-wrapper">
                    ${buttonsHTML}
                </div>
            `;
            container.insertAdjacentHTML('beforeend', wrapper);
        }

        // Fungsi Pindah Halaman
        window.goToPage = function (page) {
            currentPage = page;
            renderPage(page);

            // Scroll sedikit ke atas (section label) biar UX enak
            const label = document.querySelector('.section-label');
            if (label) label.scrollIntoView({ behavior: 'smooth', block: 'start' });
        };

        // Template HTML Kartu Berita (DENGAN TOMBOL SIMPAN & BACA)
        function createCardHTML(item) {
            const judul = getVal(item, 'judul') || getVal(item, 'title');
            if (!judul) return "";

            let isi = getVal(item, 'isi') || getVal(item, 'content') || "Tidak ada detail.";

            // --- FIX: REMOVE TITLE FROM CONTENT IF REPEATED ---
            if (judul && isi.toLowerCase().trim().startsWith(judul.toLowerCase().trim())) {
                isi = isi.substring(judul.length).trim();
                isi = isi.replace(/^[:\-\s]+/, '');
            }
            const tanggal = getVal(item, 'tanggal') || getVal(item, 'date');
            const kategori = getVal(item, 'kategori') || 'News';
            let gambar = getVal(item, 'gambar') || getVal(item, 'image');

            if (!gambar || gambar.length < 5) gambar = "https://via.placeholder.com/600x400?text=MQ+News";

            // Escape string biar aman
            const safeJudul = (judul || "").replace(/["']/g, "&quot;").replace(/\n/g, " ");
            const safeIsi = (isi || "").replace(/["']/g, "&quot;").replace(/\n/g, " ").substring(0, 150);

            // Encode Judul
            const targetUrl = 'baca.html?title=' + encodeURIComponent(judul);

            // Check Saved Status
            const isSaved = window.bookmarkManager ? window.bookmarkManager.isBookmarkedSync('news', judul) : false;
            const fill = isSaved ? "#d32f2f" : "none";
            const stroke = isSaved ? "#d32f2f" : "currentColor";

            return `
            <article class="news-card">
                <div class="card-img-wrap" style="aspect-ratio: 16/9 !important;">
                    <div class="card-category-float">${kategori}</div>
                    <img src="${gambar}" class="card-img" loading="lazy" onerror="this.src='https://via.placeholder.com/600x400?text=Image+Error'" onclick="handleArticleClick('${targetUrl}')" style="cursor:pointer">
                </div>
                <div class="card-body">
                    <h3 class="card-title" onclick="handleArticleClick('${targetUrl}')" style="cursor: pointer" title="${judul}">${judul}</h3>
                    
                    <div class="card-footer">
                        <div style="display:flex; align-items:center; gap:8px;">
                            <span class="card-date">${tanggal}</span>
                            
                            <button onclick="saveNews('${safeJudul}', '${safeIsi}', '${gambar}', '${targetUrl}', '${tanggal}', event)" 
                                    style="background:none; border:none; cursor:pointer; padding:4px; color:var(--text); transition:transform 0.2s;"
                                    title="${isSaved ? 'Hapus Simpanan' : 'Simpan Berita'}"
                                    id="btn-save-${judul.replace(/[^a-zA-Z0-9]/g, '_')}">
                                <svg viewBox="0 0 24 24" width="20" height="20" fill="${fill}" stroke="${stroke}" stroke-width="2" style="transition:0.3s">
                                    <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                                </svg>
                            </button>
                        </div>

                        <a onclick="handleArticleClick('${targetUrl}')" class="read-btn" href="javascript:void(0)">BACA &rarr;</a>
                    </div>
                </div>
            </article>`;
        }


        // --- 3. FITUR SEARCH & KATEGORI (DIUPDATE UNTUK LOAD MORE) ---
        function setCategory(el, cat) {
            // UI Update
            currentFilter = cat;
            document.querySelectorAll('.cat-link').forEach(link => link.classList.remove('active'));
            if (el) el.classList.add('active');
            else document.querySelectorAll('.cat-link').forEach(l => { if (l.innerText.toUpperCase() === cat.toUpperCase()) l.classList.add('active') });
            document.getElementById('current-category-label').innerText = cat === 'Semua' ? 'Berita Terkini' : cat;

            window.scrollTo({ top: 0, behavior: 'smooth' });

            // FILTER DATA (Masuk ke activeData)
            if (cat === 'Semua') {
                activeData = allNews.slice().reverse();
            } else {
                activeData = allNews.filter(i => (getVal(i, 'kategori') || '').toLowerCase().includes(cat.toLowerCase().trim())).slice().reverse();
            }

            // RENDER ULANG (Reset ke 9 awal)
            resetRender();
        }

        function executeSearch() {
            const key = document.getElementById('searchInput').value.toLowerCase();

            // FILTER DATA BERDASARKAN KEYWORD
            if (!key.trim()) {
                activeData = allNews.slice().reverse();
                document.getElementById('current-category-label').innerText = "Berita Terkini";
            } else {
                activeData = allNews.filter(i =>
                    (getVal(i, 'judul') || '').toLowerCase().includes(key) ||
                    (getVal(i, 'isi') || '').toLowerCase().includes(key)
                );
                document.getElementById('current-category-label').innerText = `Hasil Cari: "${key}"`;
            }

            // Tutup sidebar setelah search
            if (document.getElementById('sidebar').classList.contains('active')) toggleSidebar();

            // RENDER ULANG HASIL CARI (Reset ke 9 awal)
            resetRender();

            setTimeout(() => { document.getElementById('mainContainer').scrollIntoView({ behavior: 'smooth' }); }, 100);
            document.getElementById('searchInput').blur();
            document.getElementById('searchInput').value = "";
        }

        // --- 4. MISSING UI FUNCTIONS (RESTORED) ---

        window.toggleSidebar = function () {
            const sb = document.getElementById('sidebar');
            const ov = document.getElementById('overlay');
            const btn = document.querySelector('.menu-toggle');

            sb.classList.toggle('active');
            ov.classList.toggle('active');
            if (btn) btn.classList.toggle('active');
        };

        window.handleArticleClick = function (url) {
            window.location.href = url;
        };

        window.handleEnterKey = function (e) {
            if (e.key === 'Enter') executeSearch();
        };

        window.toggleMoreMenu = function () {
            const hiddenItems = document.querySelectorAll('.hidden-row');
            const btnText = document.getElementById('textMore');
            const btnIcon = document.getElementById('iconMore');

            // Cek state (apakah sedang terbuka?)
            const isOpen = btnText.innerText === 'TUTUP';

            hiddenItems.forEach(item => {
                // Toggle display
                // Asumsi: hidden-row di CSS di-set display: none secara default
                if (isOpen) {
                    item.style.display = 'none';
                } else {
                    item.style.display = 'flex'; // Menu item biasanya flex
                }
            });

            if (!isOpen) {
                // BUKA MENU
                btnText.innerText = 'TUTUP';
                // Ganti Icon jadi X
                btnIcon.innerHTML = `
                    <line x1="18" y1="6" x2="6" y2="18" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line>
                    <line x1="6" y1="6" x2="18" y2="18" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line>
                `;
            } else {
                // TUTUP MENU
                btnText.innerText = 'LAINNYA';
                // Balikin Icon Grid
                btnIcon.innerHTML = `
                    <rect x="3" y="3" width="7" height="7"></rect>
                    <rect x="14" y="3" width="7" height="7"></rect>
                    <rect x="14" y="14" width="7" height="7"></rect>
                    <rect x="3" y="14" width="7" height="7"></rect>
                `;
            }
        };

        window.toggleDropdown = function (id) {
            const el = document.getElementById(id);
            if (el) {
                el.classList.toggle('active');
            }
        };

        window.saveNews = async function (judul, isi, gambar, url, tanggal, e) {
            if (e) { e.stopPropagation(); e.preventDefault(); }

            // Use Bookmark Manager
            if (window.bookmarkManager) {
                // Construct data object
                const data = {
                    title: judul,
                    isi: isi,
                    image: gambar,
                    url: url,
                    date: tanggal
                };

                const result = await window.bookmarkManager.toggleBookmark('news', data);

                if (result === 'saved' || result === 'removed') {
                    // Update UI immediately for this specific button if found (Optional optimization)
                    // But re-render is triggered by listener usually. 
                    // Since we want immediate feedback, let's toggle the specific button SVG
                    const btn = e.currentTarget;
                    const svg = btn.querySelector('svg');
                    if (result === 'saved') {
                        svg.setAttribute('fill', '#d32f2f');
                        svg.setAttribute('stroke', '#d32f2f');
                    } else {
                        svg.setAttribute('fill', 'none');
                        svg.setAttribute('stroke', 'currentColor');
                    }
                }
            } else {
                alert("Sistem sedang memuat.. coba sesaat lagi.");
            }
        };

        function showSavedNotification(msg, type) {
            let box = document.getElementById('notifBox');
            if (!box) {
                // Buat elemen notifikasi jika belum ada
                box = document.createElement('div');
                box.id = 'notifBox';
                box.className = 'custom-notif';
                box.innerHTML = '<div id="notifIcon"></div><span id="notifText"></span>';
                document.body.appendChild(box);
            }
            const text = document.getElementById('notifText');
            const icon = document.getElementById('notifIcon');

            text.innerText = msg;

            // Reset class
            box.className = "custom-notif active";
            if (type === 'success') {
                box.classList.add('success');
                // Icon Checkmark SVG
                icon.innerHTML = '<svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>';
            } else {
                box.classList.add('error');
                // Icon Warning SVG
                icon.innerHTML = '<svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>';
            }

            // Auto hide
            setTimeout(() => { box.classList.remove('active'); }, 3000);
        }

        // CRITICAL: Call init() to load news data
        if (typeof init === 'function') {
            init();
        }

        // --- PWA INSTALL LOGIC ---
        let deferredPrompt;
        const installBtn = document.getElementById('installBtn');

        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevent Chrome 67 and earlier from automatically showing the prompt
            e.preventDefault();
            // Stash the event so it can be triggered later.
            deferredPrompt = e;
            console.log("PWA: beforeinstallprompt fired");
        });

        if (installBtn) {
            installBtn.addEventListener('click', async () => {
                if (deferredPrompt) {
                    // Show the install prompt
                    deferredPrompt.prompt();
                    // Wait for the user to respond to the prompt
                    const { outcome } = await deferredPrompt.userChoice;
                    console.log(`PWA: User response to install prompt: ${outcome}`);
                    // We've used the prompt, and can't use it again, throw it away
                    deferredPrompt = null;
                } else {
                    // Trigger Custom Notification (Reuse showSavedNotification for consistency)
                    showSavedNotification("Aplikasi mungkin sudah terinstall atau browser tidak mendukung.", "error");
                }
            });
        }

    </script>
</body>

</html>